---

- name: consul | check if file is downloaded
  become: false
  stat:
    path: "{{ base_dir['downloads'] }}/{{ package_name_consul }}.zip"
  register: package_status_consul

- block:

  - name: consul | download package
    become: false
    get_url:
      url: "{{ package_url_consul }}"
      dest: "{{ base_dir['downloads'] }}"
      checksum: "sha256:{{ checksum_url_consul }}"
      validate_certs: false
    register: download_status_consul

  when: not package_status_consul['stat']['exists']
